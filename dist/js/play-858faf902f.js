"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};$(function(){function n(n,a){var t=$("<img/>");$("#app .song-bg").css({"background-image":"url("+a+")"}),t.attr({src:n,class:"cover"}).appendTo($(".default-cover"))}function a(n){function a(n){return 1===(""+parseInt(n)).length?n="0"+n:n+="",n}var t=document.createElement("audio"),e=$("#app .disc"),o=$(".needle"),s=$(".disc-container .play-btn"),r=$(".disc .pause-btn");t.src=n,t.oncanplay=function(){t.play(),e.addClass("playing"),o.addClass("active")},t.onended=function(){e.addClass("paused").removeClass("playing"),o.removeClass("active")},s.click(function(){t.play(),e.removeClass("paused").addClass("playing"),o.addClass("active")}),r.click(function(){t.pause(),e.addClass("paused").removeClass("playing"),o.removeClass("active")}),t.ontimeupdate=function(){var n=$(".lrc"),e=$(".lrc-line"),o=e.length,s=t.currentTime,r=parseInt(s/60),c=s%60;s=a(r)+":"+a(c),e.each(function(a,t){if(s>$(t).attr("data-time")&&(s<e.eq(a+1).attr("data-time")||a===o-1)){var r=e.eq(a).offset().top-n.offset().top;return n.css({transform:"translateY(-"+r+"px)"}),void $(t).addClass("active").prev().removeClass("active")}})}}function t(n){var a=n.split("\n"),t=/\[\d+:\d+\.\d+\]/,e=/\[(.+)\](.*)/;return a=(a=a.filter(function(n){return!(!t.test(n)||""==n)})).map(function(n){var a=e.exec(n);if(a)return{time:a[1],line:a[2]}})}function e(n,a,e,o){var s=$(".song-info");$('\n      <div class="title">\n        <span class="song-name">'+n+'</span>\n        <span>-</span>\n        <span class="song-author">'+a+"</span>\n      </div>\n    ").prependTo(s);var r=$(".lrc-wrap"),c=$('<div class="lrc"></div>');e?$.get("//owf5g9dnv.bkt.clouddn.com/lrc/"+(o+1)+".json").then(function(n){var a=n.lrc.lyric,e=n.tlyric.lyric,o=t(a);if(void 0!==(void 0===e?"undefined":_typeof(e))){var s=t(e);o.map(function(n,a){var t=n,e=a;s.forEach(function(n,a){n.time===t.time&&(o[e].line2=n.line)})})}o.map(function(n){var a=$("<span></span>"),t=$("<span></span>"),e=$("<p></p>");a.attr({class:"origin-lrc-line"}).text(n.line),t.attr({class:"translate-lrc-line"}).text(n.line2),e.attr({"data-time":n.time,class:"lrc-line"}).append(a,t),c.append(e)}),r.append(c)}):$("<p></p>").attr({class:"lrc-line"}).text("纯音乐，无歌词").appendTo(c).appendTo(r)}var o=window.location.search,s=Number(o.match(/\?id=(\d+)/)[1]);$.get("//owf5g9dnv.bkt.clouddn.com/songsDB.json?v=20170922").then(function(t){var o=t[s],r=o.coverUrl,c=o.backgroundImgUrl,i=o.url,l=o.songName,p=o.songAuthor,d=o.hasLrc;n(r,c),a(i),e(l,p,d,s)})});